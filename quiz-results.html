<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Results - Work Immersion Quiz</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/results.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            startup: {
                ready: () => {
                    console.log('MathJax is loaded and ready for results page');
                    MathJax.startup.defaultReady();
                }
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="results-container">
        <!-- Header -->
        <header class="results-header">
            <div class="header-content">
                <div class="results-nav">
                    <button class="back-btn" onclick="window.location.href='index.html'">
                        <i class="fas fa-home"></i> Back to Home
                    </button>
                    <div class="results-title">
                        <i class="fas fa-chart-line"></i>
                        <h1>Quiz Results</h1>
                    </div>
                    <button class="theme-toggle" onclick="resultsSystem.toggleTheme()" aria-label="Toggle dark mode">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Results Summary -->
        <section class="results-summary">
            <div class="summary-container">
                <div class="summary-card">
                    <div class="summary-header">
                        <div class="score-circle">
                            <div class="score-text">
                                <span class="score-percentage" id="score-percentage">0%</span>
                                <span class="score-label">Score</span>
                            </div>
                        </div>
                        <div class="summary-stats">
                            <div class="stat-group">
                                <div class="stat-item correct">
                                    <i class="fas fa-check-circle"></i>
                                    <div class="stat-content">
                                        <span class="stat-number" id="correct-count">0</span>
                                        <span class="stat-label">Correct</span>
                                    </div>
                                </div>
                                <div class="stat-item incorrect">
                                    <i class="fas fa-times-circle"></i>
                                    <div class="stat-content">
                                        <span class="stat-number" id="incorrect-count">0</span>
                                        <span class="stat-label">Incorrect</span>
                                    </div>
                                </div>
                            </div>
                            <div class="additional-stats">
                                <div class="time-taken">
                                    <i class="fas fa-clock"></i>
                                    <span>Time Taken: <span id="time-taken">0 minutes</span></span>
                                </div>
                                <div class="performance-level">
                                    <i class="fas fa-trophy"></i>
                                    <span id="performance-message">Good job!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter Controls -->
        <section class="filter-controls">
            <div class="controls-container">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all" onclick="resultsSystem.filterQuestions('all')">
                        <i class="fas fa-list"></i> All Questions
                    </button>
                    <button class="filter-btn" data-filter="correct" onclick="resultsSystem.filterQuestions('correct')">
                        <i class="fas fa-check"></i> Correct Only
                    </button>
                    <button class="filter-btn" data-filter="incorrect" onclick="resultsSystem.filterQuestions('incorrect')">
                        <i class="fas fa-times"></i> Incorrect Only
                    </button>
                </div>
                <div class="view-options">
                    <button class="view-btn" onclick="resultsSystem.toggleExplanations()">
                        <i class="fas fa-lightbulb"></i> <span id="explanation-toggle">Show Explanations</span>
                    </button>
                    <button class="view-btn" onclick="resultsSystem.printResults()">
                        <i class="fas fa-print"></i> Print Results
                    </button>
                </div>
            </div>
        </section>

        <!-- Detailed Results -->
        <main class="results-main">
            <div class="results-content">
                <div class="questions-container" id="questions-container">
                    <!-- Questions will be dynamically loaded here -->
                </div>
            </div>
        </main>

        <!-- Action Buttons -->
        <section class="action-section">
            <div class="action-container">
                <button class="btn-secondary" onclick="window.location.href='Work-Immersion.html'">
                    <i class="fas fa-redo"></i> Retake Quiz
                </button>
                <button class="btn-primary" onclick="window.location.href='index.html'">
                    <i class="fas fa-home"></i> Back to Home
                </button>
            </div>
        </section>
    </div>

    <script src="js/results-system.js"></script>
</body>
</html>
